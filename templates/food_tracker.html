{% extends "base.html" %}

{% block content %}
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h2>Food Tracker</h2>
        <div>
            <input type="date" value="{{ selected_date }}" onchange="window.location.href='{{ url_for('main.food_tracker_page') }}?date=' + this.value"
                   style="padding: 0.5rem; border: 2px solid var(--bright-teal); border-radius: 8px;">
        </div>
    </div>
    
    {% if intake and intake.entries %}
    <div class="card-split" style="margin-bottom: 2rem;">
        <div class="card-left">
            <h3>Today's Meals</h3>
            
            {% for entry in intake.entries %}
            <div class="food-entry">
                <div>
                    <strong>{{ entry.food_item.name }}</strong>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">
                        {{ entry.food_item.quantity_grams }}g
                    </div>
                </div>
                <div style="text-align: right;">
                    <span class="meal-type">{{ entry.meal_type.value.title() }}</span>
                    <div style="font-weight: 600; margin-top: 0.25rem;">
                        {{ "%.0f"|format(entry.calculate_calories()) }} cal
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="card-right">
            <h3>Daily Summary</h3>
            <div style="text-align: center; margin-top: 2rem;">
                <div class="result-label">Total Calories</div>
                <div class="result-value">{{ "%.0f"|format(intake.total_calories) }}</div>
                <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 2rem;">consumed today</div>
                
                <div style="margin-bottom: 1rem;">
                    <div class="result-label">Meals Logged</div>
                    <div style="font-size: 2rem; color: var(--bright-teal); font-weight: 600;">
                        {{ intake.entries|length }}
                    </div>
                </div>
                
                <a href="{{ url_for('main.add_food') }}" class="btn btn-reset">Add More Food</a>
            </div>
        </div>
    </div>
    {% else %}
    <div style="text-align: center; padding: 3rem; color: var(--text-secondary);">
        <div style="font-size: 4rem; margin-bottom: 1rem;">üçΩÔ∏è</div>
        <h3>No meals logged for {{ selected_date }}</h3>
        <p>Start tracking your food intake to see your daily summary</p>
        <a href="{{ url_for('main.add_food') }}" class="btn btn-primary" style="margin-top: 1rem;">Add Your First Meal</a>
    </div>
    {% endif %}
</div>
{% endblock %}
